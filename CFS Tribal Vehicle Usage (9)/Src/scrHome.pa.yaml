# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
#
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
#
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  scrHome:
    Properties:
      Fill: =varTheme.Background
      LoadingSpinnerColor: =varTheme.Primary
      OnVisible: |-
        =Set(varNow, Now());

        // Count vehicles by status using Option Set
        Set(varAvailableCount, CountRows(Filter(CFSVehicles, 'Status (cr63e_status)' = 'Status (CFSVehicles)'.Available)));
        Set(varCheckedOutCount, CountRows(Filter(CFSVehicles, 'Status (cr63e_status)' = 'Status (CFSVehicles)'.'Checked Out')));
        Set(varReservedCount, CountRows(Filter(CFSVehicles, 'Status (cr63e_status)' = 'Status (CFSVehicles)'.Reserved)));
        Set(varMaintenanceCount, CountRows(Filter(CFSVehicles, 'Status (cr63e_status)' = 'Status (CFSVehicles)'.Maintenance)));
        Set(varTotalVehicles, CountRows(CFSVehicles));

        // Load user's upcoming reservations
        ClearCollect(
            colMyUpcoming,
            FirstN(
                Sort(
                    Filter(
                        'Vehicle Reservations',
                        Associate.Associates = varUserAssociate.Associates &&
                        EndDateTime >= Today() &&
                        'Status (cr63e_status)' <> 'Status (Vehicle Reservations)'.Cancelled
                    ),
                    StartDateTime,
                    SortOrder.Ascending
                ),
                3
            )
        );


        Set(
            varFuelSpendMonth,
            Sum(
                Filter(
                    'Fuel Transactions',
                    TransactionDateTime >= Date(Year(Today()), Month(Today()), 1) &&
                    TransactionDateTime <= Today()
                ),
                Amount
            )
        );

        Set(
            varActiveCheckouts,
            CountRows(
                Filter('Vehicle Checkouts', IsBlank(ReturnedAt))
            )
        );

        Set(
            varOpenMaintenance,
            CountRows(
                Filter(
                    'Vehicle Maintenances',
                    'Status (cr63e_status)' = 'Status (Vehicle Maintenances)'.Open ||
                    'Status (cr63e_status)' = 'Status (Vehicle Maintenances)'.'In Progress'
                )
            )
        );
    Children:
      - cmpHeader_Home:
          Control: CanvasComponent
          ComponentName: cmpHeader
          Properties:
            Height: =varSize.HeaderH
            ShowBackBtn: =false
            SubTitle: =varGreeting & ", " & varUserDisplayName
            Title: ="Fleet Dashboard"
            Width: =App.Width
      - cmpBottomNav_Home:
          Control: CanvasComponent
          ComponentName: cmpBottomNav
          Properties:
            ActiveKey: ="Home"
            Height: =varSize.NavH
            Width: =App.Width
            Y: =Parent.Height - Self.Height
      - cnrDashboard:
          Control: GroupContainer@1.4.0
          Variant: AutoLayout
          Properties:
            Fill: =Color.Transparent
            Height: =Parent.Height - cmpHeader_Home.Height - cmpBottomNav_Home.Height
            LayoutDirection: =LayoutDirection.Vertical
            LayoutGap: =14
            LayoutOverflowY: =LayoutOverflow.Scroll
            PaddingBottom: =20
            PaddingLeft: =20
            PaddingRight: =20
            PaddingTop: =20
            Width: =Parent.Width
            Y: =cmpHeader_Home.Height
          Children:
            # ── STATUS STAT CARDS 2x2 GRID ──
            - cnrStatGrid:
                Control: GroupContainer@1.4.0
                Variant: GridLayout
                Properties:
                  FillPortions: =0
                  Height: =234
                  LayoutGap: =14
                  LayoutGridColumns: =2
                  LayoutMinHeight: =16
                  LayoutMinWidth: =""
                  Width: =Parent.Width - 40
                Children:
                  # ── Available Card ──
                  - cnrStatAvailable:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        Fill: =varTheme.Surface
                        RadiusBottomLeft: =varSize.CardRadius
                        RadiusBottomRight: =varSize.CardRadius
                        RadiusTopLeft: =varSize.CardRadius
                        RadiusTopRight: =varSize.CardRadius
                      Children:
                        - recAvailablePill:
                            Control: Rectangle@2.3.0
                            Properties:
                              Fill: =varStatusColors.AvailableBg
                              Height: =36
                              RadiusBottomLeft: =18
                              RadiusBottomRight: =18
                              RadiusTopLeft: =18
                              RadiusTopRight: =18
                              Width: =36
                              X: =14
                              Y: =14
                        - icoStatAvailable:
                            Control: Icon@0.0.7
                            Properties:
                              Height: =20
                              Icon: ="CircleCheck"
                              IconColor: =varStatusColors.Available
                              Width: =20
                              X: =22
                              Y: =22
                        - lblCountAvailable:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextPrimary
                              FontWeight: =FontWeight.Bold
                              Height: =38
                              Size: =28
                              Text: =varAvailableCount
                              Width: =Parent.Width - 28
                              X: =14
                              Y: =56
                        - lblLabelAvailable:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextSecondary
                              Height: =20
                              Size: =13
                              Text: ="Available"
                              Width: =Parent.Width - 28
                              X: =14
                              Y: =88
                        - btnStatAvailable:
                            Control: Button@0.0.45
                            Properties:
                              Appearance: ="Transparent"
                              BasePaletteColor: =Color.Transparent
                              FontColor: =Color.Transparent
                              Height: =Parent.Height
                              OnSelect: |-
                                =Navigate(scrVehicleList, ScreenTransition.Fade, {varFilterStatus: "Available"})
                              Text: =""
                              Width: =Parent.Width
                  # ── Checked Out Card ──
                  - cnrStatCheckedOut:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        Fill: =varTheme.Surface
                        RadiusBottomLeft: =varSize.CardRadius
                        RadiusBottomRight: =varSize.CardRadius
                        RadiusTopLeft: =varSize.CardRadius
                        RadiusTopRight: =varSize.CardRadius
                      Children:
                        - recCheckedOutPill:
                            Control: Rectangle@2.3.0
                            Properties:
                              Fill: =varStatusColors.CheckedOutBg
                              Height: =36
                              RadiusBottomLeft: =18
                              RadiusBottomRight: =18
                              RadiusTopLeft: =18
                              RadiusTopRight: =18
                              Width: =36
                              X: =14
                              Y: =14
                        - icoStatCheckedOut:
                            Control: Icon@0.0.7
                            Properties:
                              Height: =20
                              Icon: ="Send"
                              IconColor: =varStatusColors.CheckedOut
                              Width: =20
                              X: =22
                              Y: =22
                        - lblCountCheckedOut:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextPrimary
                              FontWeight: =FontWeight.Bold
                              Height: =38
                              Size: =28
                              Text: =varCheckedOutCount
                              Width: =Parent.Width - 28
                              X: =14
                              Y: =56
                        - lblLabelCheckedOut:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextSecondary
                              Height: =20
                              Size: =13
                              Text: ="On Road"
                              Width: =Parent.Width - 28
                              X: =14
                              Y: =88
                        - btnStatCheckedOut:
                            Control: Button@0.0.45
                            Properties:
                              Appearance: ="Transparent"
                              BasePaletteColor: =Color.Transparent
                              FontColor: =Color.Transparent
                              Height: =Parent.Height
                              OnSelect: |-
                                =Navigate(scrVehicleList, ScreenTransition.Fade, {varFilterStatus: "Checked Out"})
                              Text: =""
                              Width: =Parent.Width
                  # ── Reserved Card ──
                  - cnrStatReserved:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        Fill: =varTheme.Surface
                        RadiusBottomLeft: =varSize.CardRadius
                        RadiusBottomRight: =varSize.CardRadius
                        RadiusTopLeft: =varSize.CardRadius
                        RadiusTopRight: =varSize.CardRadius
                      Children:
                        - recReservedPill:
                            Control: Rectangle@2.3.0
                            Properties:
                              Fill: =varStatusColors.ReservedBg
                              Height: =36
                              RadiusBottomLeft: =18
                              RadiusBottomRight: =18
                              RadiusTopLeft: =18
                              RadiusTopRight: =18
                              Width: =36
                              X: =14
                              Y: =14
                        - icoStatReserved:
                            Control: Icon@0.0.7
                            Properties:
                              Height: =20
                              Icon: ="Calendar"
                              IconColor: =varStatusColors.Reserved
                              Width: =20
                              X: =22
                              Y: =22
                        - lblCountReserved:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextPrimary
                              FontWeight: =FontWeight.Bold
                              Height: =38
                              Size: =28
                              Text: =varReservedCount
                              Width: =Parent.Width - 28
                              X: =14
                              Y: =56
                        - lblLabelReserved:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextSecondary
                              Height: =20
                              Size: =13
                              Text: ="Reserved"
                              Width: =Parent.Width - 28
                              X: =14
                              Y: =88
                        - btnStatReserved:
                            Control: Button@0.0.45
                            Properties:
                              Appearance: ="Transparent"
                              BasePaletteColor: =Color.Transparent
                              FontColor: =Color.Transparent
                              Height: =Parent.Height
                              OnSelect: |-
                                =Navigate(scrVehicleList, ScreenTransition.Fade, {varFilterStatus: "Reserved"})
                              Text: =""
                              Width: =Parent.Width
                  # ── Maintenance Card ──
                  - cnrStatMaintenance:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        Fill: =varTheme.Surface
                        RadiusBottomLeft: =varSize.CardRadius
                        RadiusBottomRight: =varSize.CardRadius
                        RadiusTopLeft: =varSize.CardRadius
                        RadiusTopRight: =varSize.CardRadius
                      Children:
                        - recMaintenancePill:
                            Control: Rectangle@2.3.0
                            Properties:
                              Fill: =varStatusColors.MaintenanceBg
                              Height: =36
                              RadiusBottomLeft: =18
                              RadiusBottomRight: =18
                              RadiusTopLeft: =18
                              RadiusTopRight: =18
                              Width: =36
                              X: =14
                              Y: =14
                        - icoStatMaintenance:
                            Control: Icon@0.0.7
                            Properties:
                              Height: =20
                              Icon: ="Warning"
                              IconColor: =varStatusColors.Maintenance
                              Width: =20
                              X: =22
                              Y: =22
                        - lblCountMaintenance:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextPrimary
                              FontWeight: =FontWeight.Bold
                              Height: =38
                              Size: =28
                              Text: =varMaintenanceCount
                              Width: =Parent.Width - 28
                              X: =14
                              Y: =56
                        - lblLabelMaintenance:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextSecondary
                              Height: =20
                              Size: =13
                              Text: ="Maintenance"
                              Width: =Parent.Width - 28
                              X: =14
                              Y: =88
                        - btnStatMaintenance:
                            Control: Button@0.0.45
                            Properties:
                              Appearance: ="Transparent"
                              BasePaletteColor: =Color.Transparent
                              FontColor: =Color.Transparent
                              Height: =Parent.Height
                              OnSelect: |-
                                =Navigate(scrVehicleList, ScreenTransition.Fade, {varFilterStatus: "Maintenance"})
                              Text: =""
                              Width: =Parent.Width
            # ── QUICK ACTIONS SECTION ──
            - lblQuickActions:
                Control: Label@2.5.1
                Properties:
                  AlignInContainer: =AlignInContainer.Stretch
                  AutoHeight: =true
                  Color: =varTheme.TextPrimary
                  FillPortions: =0
                  FontWeight: =FontWeight.Semibold
                  Height: =24
                  Size: =16
                  Text: ="Quick Actions"
                  Width: =Parent.Width - 40
            - cnrQuickActions:
                Control: GroupContainer@1.4.0
                Variant: AutoLayout
                Properties:
                  FillPortions: =0
                  Height: =48
                  LayoutAlignItems: =LayoutAlignItems.Center
                  LayoutDirection: =LayoutDirection.Horizontal
                  LayoutGap: =10
                  Width: =Parent.Width - 40
                Children:
                  - btnQuickReserve:
                      Control: Button@0.0.45
                      Properties:
                        BasePaletteColor: =varTheme.Primary
                        FillPortions: =1
                        FontColor: =varTheme.TextOnPrimary
                        Height: =44
                        Icon: ="Add"
                        OnSelect: |-
                          =Set(varSelectedVehicle, Blank());
                          Set(varIsNewReservation, true);
                          Navigate(scrReservation, ScreenTransition.Fade)
                        RadiusBottomLeft: =22
                        RadiusBottomRight: =22
                        RadiusTopLeft: =22
                        RadiusTopRight: =22
                        Text: ="Reserve"
                  - btnQuickFuel:
                      Control: Button@0.0.45
                      Properties:
                        Appearance: ="Secondary"
                        BasePaletteColor: =varTheme.Surface
                        FillPortions: =1
                        FontColor: =varTheme.TextPrimary
                        Height: =44
                        Icon: ="TrendingHashtag"
                        OnSelect: =Navigate(scrGasPurchase, ScreenTransition.Fade)
                        RadiusBottomLeft: =22
                        RadiusBottomRight: =22
                        RadiusTopLeft: =22
                        RadiusTopRight: =22
                        Text: ="Fuel"
                  - btnQuickVehicles:
                      Control: Button@0.0.45
                      Properties:
                        Appearance: ="Secondary"
                        BasePaletteColor: =varTheme.Surface
                        FillPortions: =1
                        FontColor: =varTheme.TextPrimary
                        Height: =44
                        Icon: ="Car"
                        OnSelect: |-
                          =Navigate(scrVehicleList, ScreenTransition.Fade, {varFilterStatus: "All"})
                        RadiusBottomLeft: =22
                        RadiusBottomRight: =22
                        RadiusTopLeft: =22
                        RadiusTopRight: =22
                        Text: ="All"
                  - btnQuickIssue:
                      Control: Button@0.0.45
                      Properties:
                        Appearance: ="Secondary"
                        BasePaletteColor: =varTheme.Surface
                        FillPortions: =1
                        FontColor: =varTheme.TextPrimary
                        Height: =44
                        Icon: ="Warning"
                        OnSelect: |-
                          =Set(varMaintVehicle, Blank());
                          Navigate(scrMaintenanceRequest, ScreenTransition.Fade)
                        RadiusBottomLeft: =22
                        RadiusBottomRight: =22
                        RadiusTopLeft: =22
                        RadiusTopRight: =22
                        Text: ="Report"
            # ── MY UPCOMING RESERVATIONS SECTION ──
            - cnrUpcomingHeader:
                Control: GroupContainer@1.4.0
                Variant: AutoLayout
                Properties:
                  FillPortions: =0
                  Height: =28
                  LayoutAlignItems: =LayoutAlignItems.Center
                  LayoutDirection: =LayoutDirection.Horizontal
                  LayoutJustifyContent: =LayoutJustifyContent.SpaceBetween
                  Visible: =CountRows(colMyUpcoming) > 0
                  Width: =Parent.Width - 40
                Children:
                  - lblUpcoming:
                      Control: Label@2.5.1
                      Properties:
                        AutoHeight: =true
                        Color: =varTheme.TextPrimary
                        FillPortions: =1
                        FontWeight: =FontWeight.Semibold
                        Height: =28
                        Size: =16
                        Text: ="My Upcoming"
                  - btnSeeAllRes:
                      Control: Button@0.0.45
                      Properties:
                        Appearance: ="Transparent"
                        FillPortions: =0
                        FontColor: =varTheme.Primary
                        Height: =28
                        OnSelect: =Navigate(scrMyReservations, ScreenTransition.Fade)
                        Text: ="See All"
                        Width: =80
            - galMyUpcoming:
                Control: Gallery@2.15.0
                Variant: BrowseLayout_Vertical_OneTextVariant_pcfCore
                Properties:
                  BorderColor: =Color.Transparent
                  FillPortions: =0
                  FocusedBorderColor: =varTheme.Primary
                  FocusedBorderThickness: =2
                  Height: =Min(CountRows(colMyUpcoming) * 94, 282)
                  Items: =colMyUpcoming
                  TemplatePadding: =0
                  TemplateSize: =80
                  Visible: =CountRows(colMyUpcoming) > 0
                  Width: =Parent.Width - 40
                Children:
                  - cnrUpcomingCard:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        Fill: =varTheme.Surface
                        Height: =80
                        RadiusBottomLeft: =varSize.CardRadius
                        RadiusBottomRight: =varSize.CardRadius
                        RadiusTopLeft: =varSize.CardRadius
                        RadiusTopRight: =varSize.CardRadius
                        Width: =Parent.TemplateWidth
                      Children:
                        - recUpcomingAccent:
                            Control: Rectangle@2.3.0
                            Properties:
                              Fill: =If(DateValue(ThisItem.StartDateTime) = Today(), varStatusColors.CheckedOut, varStatusColors.Reserved)
                              Height: =48
                              RadiusBottomLeft: =3
                              RadiusBottomRight: =3
                              RadiusTopLeft: =3
                              RadiusTopRight: =3
                              Width: =4
                              X: =0
                              Y: =16
                        - lblUpcomingVehicle:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextPrimary
                              FontWeight: =FontWeight.Semibold
                              Height: =22
                              Size: =14
                              Text: =ThisItem.Vehicle.'Vehicle Name'
                              Width: =Parent.Width - 110
                              X: =16
                              Y: =10
                        - lblUpcomingDateRange:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextSecondary
                              Height: =18
                              Size: =11
                              Text: =Text(ThisItem.StartDateTime, "mmm d") & " - " & Text(ThisItem.EndDateTime, "mmm d")
                              Width: =Parent.Width - 110
                              X: =16
                              Y: =32
                        - lblUpcomingPurpose:
                            Control: Label@2.5.1
                            Properties:
                              Color: =varTheme.TextTertiary
                              Height: =18
                              Size: =11
                              Text: =ThisItem.Purpose
                              Width: =Parent.Width - 110
                              X: =16
                              Y: =52
                        - recBadgeBg:
                            Control: Rectangle@2.3.0
                            Properties:
                              Fill: =If(DateValue(ThisItem.StartDateTime) = Today(), varStatusColors.CheckedOutBg, varTheme.PrimaryLight)
                              Height: =26
                              RadiusBottomLeft: =13
                              RadiusBottomRight: =13
                              RadiusTopLeft: =13
                              RadiusTopRight: =13
                              Width: =If(DateValue(ThisItem.StartDateTime) = Today(), 62, 56)
                              X: =Parent.Width - Self.Width - 14
                              Y: =27
                        - lblUpcomingBadge:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Center
                              Color: =If(DateValue(ThisItem.StartDateTime) = Today(), varStatusColors.CheckedOut, varTheme.Primary)
                              FontWeight: =FontWeight.Bold
                              Height: =26
                              Size: =10
                              Text: |-
                                =If(
                                    DateValue(ThisItem.StartDateTime) = Today(),
                                    "TODAY",
                                    If(
                                        DateDiff(Today(), DateValue(ThisItem.StartDateTime), TimeUnit.Days) = 1,
                                        "1 day",
                                        Text(DateDiff(Today(), DateValue(ThisItem.StartDateTime), TimeUnit.Days)) & " days"
                                    )
                                )
                              Width: =If(DateValue(ThisItem.StartDateTime) = Today(), 62, 56)
                              X: =Parent.Width - Self.Width - 14
                              Y: =27
                        - btnUpcomingTap:
                            Control: Button@0.0.45
                            Properties:
                              Appearance: ="Transparent"
                              BasePaletteColor: =Color.Transparent
                              FontColor: =Color.Transparent
                              Height: =Parent.Height
                              OnSelect: =Navigate(scrMyReservations, ScreenTransition.Fade)
                              Text: =""
                              Width: =Parent.Width
            # ── EMPTY STATE: NO UPCOMING RESERVATIONS ──
            - cnrNoUpcoming:
                Control: GroupContainer@1.4.0
                Variant: ManualLayout
                Properties:
                  Fill: =varTheme.Surface
                  FillPortions: =0
                  Height: =160
                  RadiusBottomLeft: =varSize.CardRadius
                  RadiusBottomRight: =varSize.CardRadius
                  RadiusTopLeft: =varSize.CardRadius
                  RadiusTopRight: =varSize.CardRadius
                  Visible: =CountRows(colMyUpcoming) = 0
                  Width: =Parent.Width - 40
                Children:
                  - recEmptyIconBg:
                      Control: Rectangle@2.3.0
                      Properties:
                        Fill: =varTheme.PrimaryBg
                        Height: =48
                        RadiusBottomLeft: =24
                        RadiusBottomRight: =24
                        RadiusTopLeft: =24
                        RadiusTopRight: =24
                        Width: =48
                        X: =(Parent.Width - 48) / 2
                        Y: =20
                  - icoNoUpcoming:
                      Control: Icon@0.0.7
                      Properties:
                        Height: =24
                        Icon: ="CalendarBlank"
                        IconColor: =varTheme.Primary
                        Width: =24
                        X: =(Parent.Width - 24) / 2
                        Y: =32
                  - lblNoUpcomingTitle:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Center
                        Color: =varTheme.TextPrimary
                        FontWeight: =FontWeight.Semibold
                        Height: =22
                        Size: =14
                        Text: ="No Upcoming Reservations"
                        Width: =Parent.Width
                        Y: =76
                  - lblNoUpcomingDesc:
                      Control: Label@2.5.1
                      Properties:
                        Align: =Align.Center
                        Color: =varTheme.TextTertiary
                        Height: =18
                        Size: =12
                        Text: ="You have no trips scheduled. Book one now!"
                        Width: =Parent.Width - 40
                        X: =20
                        Y: =98
                  - btnMakeFirstRes:
                      Control: Button@0.0.45
                      Properties:
                        Appearance: ="Transparent"
                        FontColor: =varTheme.Primary
                        FontWeight: =FontWeight.Bold
                        Height: =32
                        OnSelect: |-
                          =Set(varSelectedVehicle, Blank());
                          Set(varIsNewReservation, true);
                          Navigate(scrReservation, ScreenTransition.Fade)
                        Text: ="Make a Reservation"
                        Width: =200
                        X: =(Parent.Width - 200) / 2
                        Y: =120
            # ── MONTHLY SNAPSHOT BANNER ──
            - lblSnapshotTitle:
                Control: Label@2.5.1
                Properties:
                  AlignInContainer: =AlignInContainer.Stretch
                  AutoHeight: =true
                  Color: =varTheme.TextPrimary
                  FillPortions: =0
                  FontWeight: =FontWeight.Semibold
                  Height: =24
                  Size: =16
                  Text: ="Monthly Snapshot"
                  Width: =Parent.Width - 40
            - cnrSnapshot:
                Control: GroupContainer@1.4.0
                Variant: AutoLayout
                Properties:
                  Fill: =varTheme.Surface
                  FillPortions: =0
                  Height: =88
                  LayoutAlignItems: =LayoutAlignItems.Center
                  LayoutDirection: =LayoutDirection.Horizontal
                  PaddingBottom: =12
                  PaddingLeft: =4
                  PaddingRight: =4
                  PaddingTop: =12
                  RadiusBottomLeft: =varSize.CardRadius
                  RadiusBottomRight: =varSize.CardRadius
                  RadiusTopLeft: =varSize.CardRadius
                  RadiusTopRight: =varSize.CardRadius
                  Width: =Parent.Width - 40
                Children:
                  - cnrSnapFuel:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        FillPortions: =1
                        Height: =Parent.Height - 24
                      Children:
                        - icoSnapFuel:
                            Control: Icon@0.0.7
                            Properties:
                              Height: =18
                              Icon: ="TrendingHashtag"
                              IconColor: =varTheme.Accent
                              Width: =18
                              X: =(Parent.Width - 18) / 2
                              Y: =0
                        - lblSnapFuelValue:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Center
                              Color: =varTheme.TextPrimary
                              FontWeight: =FontWeight.Bold
                              Height: =26
                              Size: =17
                              Text: ="$" & Text(varFuelSpendMonth, "#,##0")
                              Width: =Parent.Width
                              Y: =20
                        - lblSnapFuelLabel:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Center
                              Color: =varTheme.TextTertiary
                              Height: =16
                              Size: =11
                              Text: ="Fuel Spend"
                              Width: =Parent.Width
                              Y: =44
                  - recSnapDivider1:
                      Control: Rectangle@2.3.0
                      Properties:
                        Fill: =varTheme.Divider
                        FillPortions: =0
                        Height: =40
                        Width: =1
                  - cnrSnapCheckouts:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        FillPortions: =1
                        Height: =Parent.Height - 24
                      Children:
                        - icoSnapCheckouts:
                            Control: Icon@0.0.7
                            Properties:
                              Height: =18
                              Icon: ="Send"
                              IconColor: =varStatusColors.CheckedOut
                              Width: =18
                              X: =(Parent.Width - 18) / 2
                              Y: =0
                        - lblSnapCheckoutsValue:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Center
                              Color: =varTheme.TextPrimary
                              FontWeight: =FontWeight.Bold
                              Height: =26
                              Size: =17
                              Text: =Text(varActiveCheckouts)
                              Width: =Parent.Width
                              Y: =20
                        - lblSnapCheckoutsLabel:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Center
                              Color: =varTheme.TextTertiary
                              Height: =16
                              Size: =11
                              Text: ="Active Out"
                              Width: =Parent.Width
                              Y: =44
                  - recSnapDivider2:
                      Control: Rectangle@2.3.0
                      Properties:
                        Fill: =varTheme.Divider
                        FillPortions: =0
                        Height: =40
                        Width: =1
                  - cnrSnapMaint:
                      Control: GroupContainer@1.4.0
                      Variant: ManualLayout
                      Properties:
                        FillPortions: =1
                        Height: =Parent.Height - 24
                      Children:
                        - icoSnapMaint:
                            Control: Icon@0.0.7
                            Properties:
                              Height: =18
                              Icon: ="Warning"
                              IconColor: =If(varOpenMaintenance > 0, varStatusColors.Warning, varTheme.TextTertiary)
                              Width: =18
                              X: =(Parent.Width - 18) / 2
                              Y: =0
                        - lblSnapMaintValue:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Center
                              Color: =If(varOpenMaintenance > 0, varStatusColors.Warning, varTheme.TextPrimary)
                              FontWeight: =FontWeight.Bold
                              Height: =26
                              Size: =17
                              Text: =Text(varOpenMaintenance)
                              Width: =Parent.Width
                              Y: =20
                        - lblSnapMaintLabel:
                            Control: Label@2.5.1
                            Properties:
                              Align: =Align.Center
                              Color: =varTheme.TextTertiary
                              Height: =16
                              Size: =11
                              Text: ="Open Maint."
                              Width: =Parent.Width
                              Y: =44
            # ── FLEET SUMMARY BANNER ──
            - cnrFleetSummary:
                Control: GroupContainer@1.4.0
                Variant: ManualLayout
                Properties:
                  Fill: =varTheme.PrimaryDark
                  FillPortions: =0
                  Height: =56
                  RadiusBottomLeft: =varSize.CardRadius
                  RadiusBottomRight: =varSize.CardRadius
                  RadiusTopLeft: =varSize.CardRadius
                  RadiusTopRight: =varSize.CardRadius
                  Width: =Parent.Width - 40
                Children:
                  - icoFleetSummary:
                      Control: Icon@0.0.7
                      Properties:
                        Height: =20
                        Icon: ="Car"
                        IconColor: =varTheme.TextOnPrimary
                        Width: =20
                        X: =20
                        Y: =18
                  - lblFleetTotal:
                      Control: Label@2.5.1
                      Properties:
                        Color: =varTheme.TextOnPrimary
                        FontWeight: =FontWeight.Semibold
                        Height: =22
                        Size: =14
                        Text: ="Fleet: " & varTotalVehicles & " vehicles"
                        Width: =Parent.Width - 56
                        X: =48
                        Y: =8
                  - lblFleetAvailable:
                      Control: Label@2.5.1
                      Properties:
                        Color: =ColorFade(varTheme.TextOnPrimary, 20%)
                        Height: =18
                        Size: =12
                        Text: =varAvailableCount & " available and ready to go"
                        Width: =Parent.Width - 56
                        X: =48
                        Y: =30
